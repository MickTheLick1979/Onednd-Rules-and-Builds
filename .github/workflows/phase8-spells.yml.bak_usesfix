name: Phase 8 — Spells (strict)

on:
  pull_request:
  push:

jobs:
  phase8-strict:
    name: Validate spells + spells index (strict)
    runs-on: ubuntu-latest
    steps:
      - name: Check out
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          ref: ${{ github.head_ref || github.ref }}

      - name: Set up Python
        uses: actions/setup-python@v5
        uses: - name: Install deps
        uses:   run: |
        uses:     python -m pip install --upgrade pip
        uses:     pip install -r requirements.txt
        with:
          python-version: "3.x"

      - name: Install deps
        run: |
          python -m pip install --upgrade pip jsonschema

      - name: Show repo tree (debug)
        run: |
          pwd
          ls -la
          ls -la scripts || true
          ls -la schema || true
          ls -la schema/2024 || true
          ls -la schema/2024/v1 || true

      - name: Run Phase 8 strict validator
        run: |
          python scripts/validate_phase8_spells.py

